(function(a){var w="7700000000000";var v="77";var G="7800000000000";var F="78";var M="7700000200000";a.ajaxSetup({cache:false});a.customDateTimePicker=function(N){if(N){N.find('[role="dateTimePicker"]').each(function(){a(this).datetimepicker({useCurrent:false,locale:"ru",format:"L"})});N.find('[role="dateAndTimePicker"]').each(function(){a(this).datetimepicker({useCurrent:false,locale:"ru",collapse:false,sideBySide:true,})})}else{a('[role="dateTimePicker"]').each(function(){a(this).datetimepicker({useCurrent:false,locale:"ru",format:"L"})});a('[role="dateAndTimePicker"]').each(function(){a(this).datetimepicker({useCurrent:false,locale:"ru",collapse:false,sideBySide:true,})})}};a.setEmailAutocomplete=function(N){N=N||a(document);N.find('[role="emailAutocomplete"]').each(function(){a(this).dadataEmail()})};a.setYandexGoal=function(N){if(typeof(yaCounter34154085)!="undefined"&&N){yaCounter34154085.reachGoal(N)}};a.sendEventUxs=function(N){if(typeof(UXS)!="undefined"&&N){UXS.sendEvent(N)}};a.fotmatDigits=function(N){return N.replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1 ")};a.establishFormValidator=function(O,N){O=O||a(document);O.find("form").each(function(){a(this).resetValidator(N)})};a.setMoneyFormat=function(N){N=N||a(document);N.find('[role="money"]').each(function(){a(this).number(true,0,"."," ");a(this).attr("inputmode","numeric")})};a.setIntFormat=function(N){N=N||a(document);N.find('[role="numberInt"]').each(function(){a(this).number(true,0,".","");a(this).attr("inputmode","numeric")})};a.setFloatFormat=function(N){N=N||a(document);N.find('[role="numberFloat"]').each(function(){a(this).numberMask({type:"float",afterPoint:2,defaultValueInput:"",decimalMark:","});a(this).attr("inputmode","decimal")})};a.setMaskOn=function(N){N=N||a(document);N.find("[data-mask]").each(function(){var O=a(this).data("clearincomplete")==false?false:true;a(this).inputmask(a(this).data("mask").toString(),{showMaskOnHover:false,clearIncomplete:O})})};a.fn.toObject=function(N){N=N||function(R){return R.val()};var P=a(this).map(function(){return N(a(this))});var Q={};for(var O=0;O<P.length;++O){if(P[O]!==undefined){Q[O]=P[O]}}return Q};a.fn.toNArray=function(N){N=N||function(R){return R.val()};var P=a(this).map(function(){return N(a(this))});var Q=[];for(var O=0;O<P.length;++O){if(P[O]!==undefined){Q[O]=P[O]}}return Q};a.createGuid=function(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(N){var O=Math.random()*16|0,P=N==="x"?O:(O&3|8);return P.toString(16)})};a.fn.customScrollTop=function(N){window.scrollTo(0,N)};a.fn.animateScrollTop=function(N,O){if(a(this)){N=N?N:1000;O=O?O:0;a("html, body").animate({scrollTop:a(this).offset().top+O},N)}};a.fn.animateScrollBottom=function(O,N){if(a(this)){O=O?O:1000;N=N?N:0;N=N-a(window).height();N=a(this).offset().top+a(this).height()+N;a("html, body").animate({scrollTop:N},O)}};a.maskForm=function(S,Q){var P=a(".loader");if(P.length==0){var O='<div class="loader"><div class="loader-wrap"><p>'+S+'</p> <div class="loader2"><span></span><span></span><span></span></div></div></div>';if(Q){Q.append(O);Q.addClass("fixed")}else{a("body").append(O);a("body, html").addClass("fixed")}var N=a("<div/>");N.css("overflowY","scroll");N.css("width","50px");N.css("height","50px");N.css("visibility","hidden");if(Q){Q.append(N)}else{a("body").append(N)}var R=N.offsetWidth-N.clientWidth;N.remove();if(Q){Q.css("margin-right",R);Q.css("margin-left",-R/2)}else{a("body.fixed").css("margin-right",R);a("body.fixed .top-bar").css("margin-left",-R/2)}}};a.unMaskForm=function(N){a(".loader").remove();if(N){N.removeClass("fixed")}else{a("body, html").removeClass("fixed")}};var L=a.validator;a.fn.resetValidator=function(O){var N=a(this).data("validator");if(!N||O){a(this).unbind();a(this).data("unobtrusiveValidation",null);a(this).data("validator",null);a.validator.unobtrusive.parse(a(this))}a(this).bind("invalid-form.validate",function(R,S){var P=S.numberOfInvalids();if(P){var Q=S.errorList[0].element;if(Q){Q=a(Q);if(Q.prop("type")=="select-one"||Q.prop("type")=="select-multiple"){Q.closest(".select-control").find(".bootstrap-select .btn.dropdown-toggle").focus()}else{if(Q.prop("type")=="checkbox"){Q.closest("label").find("a").focus()}else{Q.focus()}}}}})};a.extend(L.messages,{required:"Введите значение параметра",remote:"Пожалуйста, введите правильное значение.",email:"Пожалуйста, введите корректный адрес электронной почты.",url:"Пожалуйста, введите корректный URL.",date:"Пожалуйста, введите корректную дату.",dateISO:"Пожалуйста, введите корректную дату в формате ISO.",number:"Пожалуйста, введите число",digits:"Пожалуйста, вводите только цифры.",creditcard:"Пожалуйста, введите правильный номер кредитной карты.",equalTo:"Пожалуйста, введите такое же значение ещё раз.",extension:"Пожалуйста, выберите файл с правильным расширением.",maxlength:a.validator.format("Пожалуйста, введите не больше {0} символов."),minlength:a.validator.format("Пожалуйста, введите не меньше {0} символов."),rangelength:a.validator.format("Пожалуйста, введите значение длиной от {0} до {1} символов."),range:a.validator.format("Пожалуйста, введите число от {0} до {1}."),max:a.validator.format("Пожалуйста, введите число, меньшее или равное {0}."),min:a.validator.format("Пожалуйста, введите число, большее или равное {0}.")});L.methods.number=function(O,N){return this.optional(N)||/^-?(?:\d+|\d{1,3}(?:[\s\.,]\d{3})+)(?:[\.,]\d+)?$/.test(O)};L.methods.date=function(P,O){if(this.optional(O)){return true}try{a.datepicker.parseDate("dd.mm.yy",P);return true}catch(N){return false}};L.methods.range=function(Q,N,P){var O=Q!=undefined?Q.replace(",","."):Q;return this.optional(N)||(O>=P[0]&&O<=P[1])};var b=a.validator.prototype.getLength;a.validator.prototype.getLength=function(S,N){if(N.nodeName.toLowerCase()==="textarea"){var O=/\r?\n|\r/g;if(N.value){var Q=N.value.match(O);var P=Q?Q.length:0;var R=N.value.replace(O,"");return R.length+(P*2)}else{return 0}}return b.apply(this,arguments)};var c=L.unobtrusive.adapters;var B="requiredifvisible";var i="customrangelength";var j="customrequired";var A="requiredifdependenton";var l="dependentonothervalue";var E="smallerother";var D="smallerothert";var e="booleanrequired";var f="checkdate";var y="rangefilesize";var n="fileextensions";var u="metrorequired";var I="typeopenplanningrequired";var t="maxvalue";var g="commissionval";var z="rentrangewithunit";var H="totalareaval";var h="commrangeprice";var s="locationrequired";var p="homerangeprice";var C="residentialrangeprice";var J="userexists";var m="emailvalidation";var x="newyearbuildingrangelength";var d="anyurlexceptimls";var k="dependentonboooleanchecked";var r="listcount";var q="innvalid";c.addBool(f).addBool(B).addBool(I).addBool(u).addBool(q).addBool(j).addBool(d).addSingleVal(n,"extensions").addSingleVal(e,"value").addSingleVal(t,"max").addSingleVal(r,"mincount").addSingleVal(m,"url");L.addMethod(r,function(Q,O,P){if(a("input[name='"+O.name+"']").length==0){return true}var N=a("input[name='"+O.name+"']:checked");return(N!=null&&N.length>=P)});c.add(k,["propertyname","ischecked"],function(O){var N=a(O.form).find(':input[name="'+O.params.propertyname+'"]')[0];O.rules[k]={element:N,ischecked:O.params.ischecked};O.messages[k]=O.message});L.addMethod(k,function(P,N,O){if(O.element.checked.toString().toLowerCase()==O.ischecked.toLowerCase()){return P!=null&&a.trim(P).length>0}return true});L.addMethod(d,function(O,N){if(this.optional(N)){return true}return !/^(http|https):\/\/(.*\.)?imls\.ru.*$/.test(O)});c.add(y,["minsize","maxsize"],function(N){N.rules[y]=N.params;N.messages[y]=N.message});c.add(J,["url"],function(N){N.rules[J]=N.params;N.messages[J]=N.message;N.messages[J]=function(P,O,Q){return a.validator.format(N.message,a(O).val())}});c.add(x,["min","max"],function(N){N.rules[x]=N.params;N.messages[x]=N.message;N.messages[x]=function(Q,O,R){var P=a("#newYearBuildingRangeLength").val();if(P=="true"){return a.validator.format(N.message,Q.min,parseInt(Q.max)+5)}return a.validator.format(N.message,Q.min,Q.max)}});c.add(i,["min","max"],function(N){N.rules[i]=N.params;N.messages[i]=N.message});c.add(E,["propertyname"],function(O){var N=a(O.form).find(':input[name="'+O.params.propertyname+'"]')[0];O.rules[E]={element:N};O.messages[E]=O.message});c.add(D,["propertyname"],function(O){var N=a(O.form).find(':input[name="'+O.params.propertyname+'"]')[0];O.rules[D]={element:N};O.messages[D]=O.message});c.add(H,["propertyname","propertynamesecond"],function(P){var N=a(P.form).find(':input[name="'+P.params.propertyname+'"]')[0];var O=a(P.form).find(':input[name="'+P.params.propertynamesecond+'"]')[0];P.rules[H]={element:N,element1:O};P.messages[H]=P.message});c.add(A,["propertyname","propertyvalue"],function(O){var N=a(O.form).find(':input[name="'+O.params.propertyname+'"]')[0];O.rules[A]={element:N,propertyvalue:O.params.propertyvalue};O.messages[A]=O.message});c.add(l,["propertyname","propertyvalue"],function(O){var N=a(O.form).find(':input[name="'+O.params.propertyname+'"]')[0];O.rules[l]={element:N,propertyvalue:O.params.propertyvalue};O.messages[l]=O.message});c.add(s,function(N){N.rules[s]={};N.messages[s]=function(P,O,Q){return a.validator.format(a(O).data("val-message-error"))}});L.addMethod(s,function(Y,O){var T=a(O);if(this.optional(O)){T.data("val-message-error","Введите адрес в свободной форме и выберите нужный из списка!");return false}var X=true;var S=[];var N=a("#Location_City");var U=a("#Location_Settlement");if(!N.val()&&!U.val()){X=false;S.push("Город")}var V=a("#Location_Street");var W=a("#streetRequired").val();if(W=="true"){var R=a("#Location_CityKladrId").val();if(R){if(R==w||R==G){if(!V.val()){X=false;S.push("Улица")}}else{if(!V.val()){S.push("Улица (если есть)")}}}else{if(!V.val()){S.push("Улица (если есть)")}}}else{if(!V.val()){S.push("Улица (если есть)")}}var Q=a("#houseRequired").val();if(Q=="true"){var P=a("#Location_House");if(!P.val()){X=false;S.push("Номер дома")}}T.data("val-message-error","Не указано: "+S.join(", ")+"! Добавьте эти данные и выберите адрес из списка!");return X});c.add(h,function(N){N.rules[h]={};N.messages[h]=function(P,O,Q){return a.validator.format(a(O).data("val-commrangeprice"))}});L.addMethod(h,function(S,O){if(this.optional(O)){return true}var Q=a(O);var P=Q.closest("form");var N={};N.price=P.find("#Price_Price").val();N.operationType=P.find("#OperationType").val();N.area=P.find("#Area").val();N.areaUnit=P.find("#AreaUnit").val();N.kladrId=P.find("#Location_CityKladrId").val();N.okato=P.find("#Location_Okato").val();N.subTypeId=P.find("#SubTypeId").val();N.currencyType=P.find("#Price_Currency").val();N.unitPriceType=P.find("#Price_UnitPrice").val();var R=true;a.ajax({type:"POST",url:"/commercialre/pricevalidation",data:N,success:function(T){if(T.Valid==false){Q.data("val-commrangeprice",T.Message)}R=T.Valid},async:false});return R});L.addMethod(J,function(Q,N,O){if(this.optional(N)){return true}var P=true;a.ajax({type:"GET",url:O.url,data:{email:Q},success:function(R){P=R},async:false});return P});L.addMethod(m,function(Q,N,O){if(this.optional(N)){return true}var P=true;a.ajax({type:"GET",url:O,data:{email:Q},success:function(R){P=R},async:false});return P});c.add(p,function(N){N.rules[p]={};N.messages[p]=function(P,O,Q){return a.validator.format(a(O).data("val-homerangeprice"))}});L.addMethod(p,function(S,O){if(this.optional(O)){return true}var Q=a(O);var P=Q.closest("form");var N={};N.price=P.find("#Price_Price").val();N.operationType=P.find("#OperationType").val();N.area=P.find("#TotalArea").val();N.kladrId=P.find("#Location_CityKladrId").val();N.okato=P.find("#Location_Okato").val();N.subTypeId=P.find("#SubTypeId").val();N.currencyType=P.find("#Price_Currency").val();N.unitPriceType=P.find("#Price_UnitPrice").val();var R=true;a.ajax({type:"POST",url:"/homere/pricevalidation",data:N,success:function(T){if(T.Valid==false){Q.data("val-homerangeprice",T.Message)}R=T.Valid},async:false});return R});c.add(C,function(N){N.rules[C]={};N.messages[C]=function(P,O,Q){return a.validator.format(a(O).data("val-residentialrangeprice"))}});L.addMethod(C,function(S,O){if(this.optional(O)){return true}var Q=a(O);var P=Q.closest("form");var N={};N.price=P.find("#Price_Price").val();N.operationType=P.find("#OperationType").val();N.area=P.find("#Area").val();N.areaUnit=P.find("#AreaUnit").val();N.kladrId=P.find("#Location_CityKladrId").val();N.okato=P.find("#Location_Okato").val();N.type=P.find("#Type").val();N.currencyType=P.find("#Price_Currency").val();N.unitPriceType=P.find("#Price_UnitPrice").val();var R=true;a.ajax({type:"POST",url:"/residentialre/pricevalidation",data:N,success:function(T){if(T.Valid==false){Q.data("val-residentialrangeprice",T.Message)}R=T.Valid},async:false});return R});c.add(g,["propertycommissionunittypename","propertyoperationtypename"],function(P){var N=a(P.form).find(':input[name="'+P.params.propertycommissionunittypename+'"]')[0];var O=a(P.form).find(':input[name="'+P.params.propertyoperationtypename+'"]')[0];P.rules[g]={element:N,element1:O};P.messages[g]=function(R,Q,T){var S=parseFloat(a(Q).val().replace(",","."));if(S<=0){return"Больше 0"}return a.validator.format(P.message)}});L.addMethod(g,function(S,O,Q){if(this.optional(O)){return true}var R=parseFloat(S.replace(",","."));if(R<=0){return false}var N=a(Q.element).val();if(N=="Percent"){var P=a(Q.element1).val();if(P=="RentDaily"||P=="Rent"){return 0<R&&1000>=R}if(P=="Sale"||P=="Ppa"){return 0<R&&100>=R}}return true});c.add(z,["propertyname","propertypricename","propertyoperationtypename","min","max"],function(Q){var N=a(Q.form).find(':input[name="'+Q.params.propertyname+'"]')[0];var O=a(Q.form).find(':input[name="'+Q.params.propertypricename+'"]')[0];var P=a(Q.form).find(':input[name="'+Q.params.propertyoperationtypename+'"]')[0];Q.rules[z]={element:N,element1:O,element2:P,min:Q.params.min,max:Q.params.max};Q.messages[z]=function(W,R,Z){var S=parseInt(W.max);var V=a(W.element2).val();if(V=="RentDaily"){S=S*30}var Y=a(W.element).val();if(Y=="Percent"){return a.validator.format(Q.message,W.min,S+" %")}if(Y=="Number"){var X=a(W.element1).val();var U=parseInt(W.min)*X/100;var T=S*X/100;return a.validator.format(Q.message,U,T)}return a.validator.format(Q.message)}});L.addMethod(z,function(W,N,Q){if(this.optional(N)){return true}var O=parseInt(Q.max);var P=a(Q.element2).val();if(P=="RentDaily"){O=parseInt(O)*30}var U=parseFloat(W.replace(",","."));var T=a(Q.element).val();if(T=="Percent"){return parseInt(Q.min)<=U&&parseInt(O)>=U}if(T=="Number"){var R=a(Q.element1).val();if(!R){return true}var S=parseInt(R);var V=U*100/S;return parseInt(Q.min)<=V&&parseInt(O)>=V}return false});L.addMethod(I,function(R,O){var P=a("#SubTypeId").val();var Q=35;37;var N=["36","7","8","9","10","11","12","37"];if(P!=Q&&N.indexOf(P)==-1){return a.validator.methods.required.call(this,R,O)}else{return true}});L.addMethod(q,function(P,O){if(this.optional(O)){return true}var N=(P.match(/:/g)||[]).length;if(N>1){if(/^([0-9:]*)$/.test(P)){return true}return false}return true});L.addMethod(u,function(Q,O){var P=a("#Location_CityKladrId").val();if(P==w||P==G){if(a(O).is("select")){var N=a(O).closest(".select-control");return N.is(":visible")?(Q!==""):true}return a(O).is(":visible")?(Q!==""):true}else{return true}});L.addMethod(e,function(P,N,O){if(!a(N).closest("label").is(":visible")){return true}return N.checked.toString()==O.toLowerCase()});L.addMethod(B,function(P,O){if(a(O).is("select")){var N=a(O).closest(".select-control");return N.is(":visible")?(P!==""):true}return a(O).is(":visible")?(P!==""):true});L.addMethod(j,function(Q,O){if(a(O).is("select")){var N=a(O).closest(".select-control");if(!N.is(":visible")){return true}}else{if(!a(O).is(":visible")){return true}}var P=a(O).data("customrequired-valid");if(P){return true}return a.validator.methods.required.call(this,Q,O)});L.addMethod(i,function(Q,N,P){if(this.optional(N)){return true}var O=a.isArray(Q)?Q.length:this.getLength(Q,N);return(O>=P.min&&O<=P.max)});L.addMethod(x,function(Q,N,P){if(this.optional(N)){return true}var R=parseInt(Q);if(!R){return true}var O=a("#newYearBuildingRangeLength").val();if(O=="true"){if((parseInt(P.max)&&R>parseInt(P.max)+5)||(parseInt(P.min)&&R<parseInt(P.min))){return false}}else{if((parseInt(P.max)&&R>parseInt(P.max))||(parseInt(P.min)&&R<parseInt(P.min))){return false}}return true});L.addMethod(E,function(S,Q,R){var P=a(R.element).val();if(!P){return true}if(!S){return true}var O=parseFloat(P.replace(",","."));if(!O){return true}var N=parseFloat(S.replace(",","."));if(!N){return true}if(O<N){return false}return true});L.addMethod(D,function(S,Q,R){var P=a(R.element).val();if(!P){return true}if(!S){return true}var O=parseFloat(P.replace(",","."));if(!O){return true}var N=parseFloat(S.replace(",","."));if(!N){return true}if(O<N){return false}return true});L.addMethod(H,function(U,S,T){var Q=a(T.element).val();var R=a(T.element1).val();if(!Q||!R){return true}if(!U){return true}var O=parseFloat(Q.replace(",","."));var P=parseFloat(R.replace(",","."));if(!O||!P){return true}var N=parseFloat(U.replace(",","."));if(!N){return true}if(O+P>N){return false}return true});L.addMethod(A,function(P,N,O){if(!a(O.element).val()){return true}if(!O.propertyvalue){return P!=null&&a.trim(P).length>0}if(a(O.element).val().toString().toLowerCase()==O.propertyvalue.toLowerCase()){return P!=null&&a.trim(P).length>0}return true});L.addMethod(l,function(P,N,O){if(this.optional(N)){return true}if(!a(O.element).val()){return true}if(!O.propertyvalue){return true}return a(O.element).val().toString().toLowerCase()==O.propertyvalue.toLowerCase()});L.addMethod(y,function(R,N,Q){var P=a(N)[0];if(P==null||P.files[0]==null){return true}var O=P.files[0];if(parseInt(Q.minsize)&&O.size<parseInt(Q.minsize)*1024){return false}if(parseInt(Q.maxsize)&&O.size>parseInt(Q.maxsize)*1024){return false}return true});L.addMethod(n,function(S,N,Q){var P=Q;if(!S||P==null||P.length==0){return true}P=P.split(",");var O=o(S);var R=a.inArray(O,P)!==-1;return R});function o(O){var N=(/[.]/.exec(O))?/[^.]+$/.exec(O):undefined;if(N!=undefined){return N[0].toLowerCase()}return N}L.addMethod(f,function(P,O){if(this.optional(O)){return true}try{a.datepicker.parseDate("dd.mm.yy",P);return true}catch(N){return false}});L.addMethod(t,function(P,N,O){if(this.optional(N)){return true}if(parseFloat(P.replace(",","."))<=parseFloat(O.replace(",","."))){return true}return false});L.setDefaults({ignore:":hidden:not([data-val='true'])",highlight:function(N,O,Q){if(a(N).hasClass("selectpicker")){a(N).closest(".select-control").removeClass("success").addClass("sel-input-validation-error")}else{if(N.type==="checkbox"){if(a(N).closest(".checkbox-multi").length<=0){a(N).removeClass(O).addClass(Q);a(N).closest("label").addClass("colorRed")}}else{if(N.type==="radio"){this.findByName(N.name).addClass(O).removeClass(Q)}else{if(N.type==="textarea"&&a(N).hasClass("emojionearea")){a(N).closest(".custom-input-block").find("div.emojionearea").addClass("emojionearea-validation-error")}else{if(N.type==="textarea"&&a(N).attr("role")=="summernote"){a(N).closest(".custom-input-block").find(".note-editor.note-frame").addClass("summernote-validation-error")}else{a(N).addClass(O).removeClass(Q)}}}}}var P=a(N).closest(".custom-input-block").find("span.req");P.removeClass("custom-hidden-notim")},unhighlight:function(N,O,Q){if(a(N).hasClass("selectpicker")){a(N).closest(".select-control").removeClass("sel-input-validation-error").addClass("success")}else{if(N.type==="checkbox"){if(a(N).closest(".checkbox-multi").length<=0){a(N).removeClass(O).addClass(Q);a(N).closest("label").removeClass("colorRed")}}else{if(N.type==="radio"){this.findByName(N.name).removeClass(O).addClass(Q)}else{if(N.type==="textarea"&&a(N).hasClass("emojionearea")){a(N).closest(".custom-input-block").find(".note-editor.note-frame").removeClass("emojionearea-validation-error")}else{if(N.type==="textarea"&&a(N).attr("role")=="summernote"){a(N).closest(".custom-input-block").find(".note-editor.note-frame").removeClass("summernote-validation-error")}else{a(N).removeClass(O).addClass(Q)}}}}}var P=a(N).closest(".custom-input-block").find("span.req");P.addClass("custom-hidden-notim")}});var K=function(O){var N=O.closest(".custom-input-block").find("span.req");if(N.length>0){if(O.val()){N.addClass("custom-hidden-notim")}else{N.removeClass("custom-hidden-notim")}}};a(document).on("change","input",function(){K(a(this))});a(document).on("keyup","input",function(){K(a(this))});a(document).on("mouseup","input",function(){K(a(this))});a(document).on("blur","input",function(){K(a(this))});a(document).on("change","textarea",function(){K(a(this))});a(document).on("change","select",function(){K(a(this))})})(jQuery);
$(function(){$("#carousel").owlCarousel({nav:true,navText:false,dots:true,items:1,loop:true,animateOut:"fadeOut",animateIn:"fadeIn",});$(".owl-obj").owlCarousel({nav:true,navText:false,dots:false,items:4,responsive:{0:{items:1},768:{items:2},1024:{items:3},1199:{items:4}}});$(".fancybox").fancybox({padding:0,margin:[10,30,10,30],});$(".error-ico").on("click",function(){});$(document).click(function(c){if($(c.target).closest(".tooltip").length){return}$(".tooltip-click").slideUp("fast");c.stopPropagation()});$(".close-tooltip").click(function(){$(this).parents(".tooltip-click").slideUp("fast");return false});imls.initSelectStyled=function(){$("select").each(function(){var f=$(this),h=$(this).children("option").length;f.addClass("select-hidden");f.wrap('<div class="select"></div>');f.after('<div class="select-styled"></div>');var e=f.next("div.select-styled");e.text(f.children("option").eq(0).text());var c=$("<ul />",{"class":"select-options"}).insertAfter(e);for(var g=0;g<h;g++){$("<li />",{text:f.children("option").eq(g).text(),rel:f.children("option").eq(g).val()}).appendTo(c)}var d=c.children("li");e.click(function(i){i.stopPropagation();$("div.select-styled.active").each(function(){$(this).removeClass("active").next("ul.select-options").hide()});$(this).toggleClass("active").next("ul.select-options").toggle()});d.click(function(i){i.stopPropagation();e.text($(this).text()).removeClass("active");f.val($(this).attr("rel"));c.hide()});$(document).click(function(){e.removeClass("active");c.hide()})})};imls.initSelectStyled();$(window).scroll(function(){if($(this).scrollTop()>700){$(".social-share").addClass("show")}else{$(".social-share").removeClass("show")}});$(window).scroll(function(){if($(this).scrollTop()>100){$(".up").fadeIn()}else{$(".up").fadeOut()}});$(".up").click(function(){$("html, body").animate({scrollTop:0},600);return false});$(".bottom-arrow").click(function(){var c=$(this).attr("href");$("html, body").animate({scrollTop:$(c).offset().top},300);return false});function b(c){var d=0;if(c.length>1){c.each(function(){currentHeight=$(this).height();if(currentHeight>d){d=currentHeight}});c.height(d)}}b($(".height1"));b($(".height2"));jQuery(".header .nav a").click(function(){elementClick=jQuery(this).attr("href");destination=jQuery(elementClick).offset().top;jQuery("html:not(:animated),body:not(:animated)").animate({scrollTop:destination},1100);return false});$(".callback-toggle").click(function(){$("#chatHistoryDialogClose").click();$(".w-callback").show()});$(document).on("click",".callback .link-st2",function(){$(this).parents(".callback").hide();$(".callback-st2").show()});$(document).on("click",".callback-close",function(){$(this).parents(".w-callback").hide()});$(document).on("click","[data-media]",function(){if($(this).hasClass("active")){return false}$("[data-media]").removeClass("active");$(this).addClass("active");$("[data-media]").each(function(){var e=$("#"+$(this).data("media"));e.hide();var d=e.find("iframe");if(d){d.attr("src",d.attr("src"))}});var c=$("#"+$(this).data("media"));c.show();return false});if(typeof ymaps!="undefined"){$('[role="map"]').click(function(){var d=$(this).data("latitude");var e=$(this).data("longitude");var f=$(this).data("map-id");var c=$(this).data("exist");if(!c){$(this).data("exist",true);ymaps.ready(function(){var g=new ymaps.Map(f,{center:[d,e],zoom:17});g.behaviors.disable("scrollZoom");var h=new ymaps.Placemark([d,e],{},{draggable:true,});g.geoObjects.add(h)})}});$('[role="map"][data-map-load="true"]').click();$('[role="panorama"]').click(function(){var d=$(this).data("latitude");var f=$(this).data("longitude");var g=$(this).data("map-id");var c=$(this).data("exist");if(!c){$(this).data("exist",true);var e=ymaps.panorama.locate([d,f]);e.then(function(h){if(h.length){var i=new ymaps.panorama.Player(g,h[0]);$("#mapPanoramaFoto").detach()}else{$("#mapPanorama").hide();$("#mapPanoramaFoto").show()}},function(h){$("#mapPanorama").hide();$("#mapPanoramaFoto").show()})}})}else{$('[role="map"]').parent("li").detach();$('[role="panorama"]').parent("li").detach()}$.setMaskOn();var a=new LazyLoad({elements_selector:".lazy",load_delay:300});$(document).on("click",".send-widows-mail",function(){var d=$(this).closest("form");var c=$(this).closest(".windows-mail-container");if(d.valid()){$.post(d.attr("action"),d.serialize(),function(f){c.html(f.Form);$.establishFormValidator();$.setMaskOn();var e=c.find("[data-recaptcha-sitekey]");if(e){grecaptcha.render(e.attr("id"),{sitekey:e.data("recaptcha-sitekey"),})}}).fail(function(){})}return false});$(document).on("click",".email-to-subject .select-options li",function(){var e=$(this).closest("form").find("textarea.email-text");var d=$(this).closest("[data-template-email]").data("template-email");var f=$(this).attr("rel");var c="";switch(f){case"InformationResidentialComplex":c="Здравствуйте! Меня интересует дополнительная информация по вашему ЖК: $1";break}c=c.replace("$1",d?d:"");e.val(c)})});var onloadCallback=function(){$('[data-recaptcha-sitekey][data-recaptcha-load="true"]').each(function(){if($(this).html()==""){grecaptcha.render($(this).attr("id"),{sitekey:$(this).data("recaptcha-sitekey")})}})};
$(document).ready(function(){$(".common-btn").hover(function(){$(this).addClass("hover")},function(){$(this).removeClass("hover")});var d=document.querySelectorAll(".common-btn_item");var c=1;setInterval(function(){for(var k=0;k<d.length;++k){$(d[k]).removeClass("active")}if(c>d.length-1){c=0}$(d[c]).addClass("active");c++},3000);$(document).click(function(k){if($(k.target).closest(".common-btn").length){return}$(".common-btn").removeClass("hover");k.stopPropagation()});var g=function(){if(!imls.currentUserId){if(!imls.hubInit){imls.initHub()}}};$.fn.chatResetValidator=function(){$(this).unbind();$(this).data("unobtrusiveValidation",null);$(this).data("validator",null);$.validator.unobtrusive.parse($(this));$(this).bind("invalid-form.validate",function(m,n){var k=n.numberOfInvalids();if(k){var l=n.errorList[0].element;if(l){l=$(l);if(l.prop("type")=="select-one"||l.prop("type")=="select-multiple"){l.closest(".select-control").find(".bootstrap-select .btn.dropdown-toggle").focus()}else{if(l.prop("type")=="checkbox"){l.closest("label").find("a").focus()}else{l.focus()}}}}})};var f=function(k){$(".scroll-pane").each(function(){var l=$(this).data("jsp");if(l==undefined){var m=$(this);$(this).jScrollPane({showArrows:$(this).is(".arrow"),autoReinitialise:true,autoReinitialiseDelay:1}).bind("jsp-initialised",function(o,p){});l=$(this).data("jsp");var n;$(window).bind("resize",function(){if(!n){n=setTimeout(function(){l.reinitialise();n=null},50)}})}else{l.reinitialise()}if(k){$(this).scrollTop(k);l.scrollTo(0,k)}})};f();var i=function(l){if(typeof Storage!=="undefined"){var m=$("#ChatMessageText").data("emojioneArea").getText();var k=$("#ChatToDialogId").val();localStorage.setItem(k+"ChatMessage",m)}};var e=function(k){var l=k||$(document);l.find(".emojionearea").emojioneArea({pickerPosition:"top",tones:false,autocomplete:false,saveEmojisAs:"shortname",attributes:{spellcheck:true},events:{keyup:function(m,n){i(m);if(n.ctrlKey&&n.keyCode==13){$("#chatSendMessageBtn").click()}},paste:i,change:i,emojibtn_click:i}})};e();var j=function(){var l=$("#chatPopupContainerItems .chat-popupitem").first();var m=$("#chatPopupContainerItems .chat-popupitem").last();if(l&&l.hasClass("custom-hidden")){$("#chatPopuptItemsPrev").removeClass("custom-hidden")}else{$("#chatPopuptItemsPrev").addClass("custom-hidden")}if(m&&m.hasClass("custom-hidden")){$("#chatPopupItemsNext").removeClass("custom-hidden")}else{$("#chatPopupItemsNext").addClass("custom-hidden")}$("#chatPopuptItemsCounter").removeClass("custom-hidden");var n=$("#chatPopupContainerItems .chat-popupitem").length;var k=0;$("#chatPopupContainerItems .chat-popupitem").each(function(o,p){if(!$(p).hasClass("custom-hidden")){k=o+1;return false}});$("#chatPopuptItemsCounter").text(k+"/"+n)};$(document).on("click",'[role="chatPopupItemClose"]',function(){var l=$(this).closest(".chat-popupitem");var k=l.siblings(".chat-popupitem.custom-hidden:first");l.detach();if(k.length>0){k.removeClass("custom-hidden");j()}else{$("#chatPopupContainer").addClass("custom-hidden");$("#chatPopuptItemsCounter").addClass("custom-hidden");$("#chatPopuptItemsPrev").addClass("custom-hidden");$("#chatPopupItemsNext").addClass("custom-hidden")}return false});var a=function(k,l,n,m,o){g();$("#chatPopupContainer").addClass("custom-hidden");$("#chatPopupContainerItems").html("");if(k){$.get(k,function(u){$("#chatContainer").addClass("custom-hidden");$("#chatDialogContainer").html("");$("#chatHistoryDialogContainer").addClass("custom-hidden");$(".chat-button.enabled").hide();$(".mobile body").addClass("modal-open");$("#chatDialogContainer").html(u.html);var s=$("#chatSendMessageBtn").closest("form");s.chatResetValidator();var v=s.find("textarea");if(n){var t=n.data("chatdialog-text-input");if(t){v.val("Проблема с вводом адреса "+$("#"+t).val())}else{if(l){var r=n.closest("[data-obj-url]");if(r.length>0){v.val(r.data("obj-url"))}else{v.val(location.href)}}else{if(typeof Storage!=="undefined"){var q=$("#ChatToDialogId").val();v.val(localStorage.getItem(q+"ChatMessage"))}}}v.change()}if(m){v.val(m);v.change()}e();if($("#chatHistoryDialogContainer").hasClass("enabled")){$("#backChatHistoryDialog").removeClass("custom-hidden")}$("#chatDialogContainer").removeClass("custom-hidden");$("#chatContainer").removeClass("custom-hidden");f(10000);f(10000);if(o){if(s.valid()){var p=s.serialize();v.val("");v.data("emojioneArea").setText("");if(typeof Storage!=="undefined"){var q=$("#ChatToDialogId").val();localStorage.removeItem(q+"ChatMessage")}$.post(s.attr("action"),p,function(){})}return false}})}};$(document).on("click","[data-chat-massageitemsurl]",function(){$("#chatPopupContainer").addClass("custom-hidden");$("#chatPopupContainerItems").html("");var k=$(this).data("chat-massageitemsurl");a(k);return false});$(document).on("click","#chatPopuptItemsPrev",function(){var k=$("#chatPopupContainerItems .chat-popupitem");k.each(function(l,m){if(!$(m).hasClass("custom-hidden")){$(k[l-1]).removeClass("custom-hidden");$(m).addClass("custom-hidden");return false}});j();return false});$(document).on("click","#chatPopupItemsNext",function(){var k=$("#chatPopupContainerItems .chat-popupitem");k.each(function(l,m){if(!$(m).hasClass("custom-hidden")){$(k[l+1]).removeClass("custom-hidden");$(m).addClass("custom-hidden");return false}});j();return false});$(document).on("change","#chatHistoryDialogSearchText",function(){var k=$("#chatHistoryDialogSearchText");var n=$("[data-chatdialog-loadurl]");var m=n.closest("div");m.addClass("custom-hidden");var o=$(this).data("chatdialog-urlsearch");var l=$("#chatNotRead");$.get(o,{skipItems:0,notRead:l.is(":checked"),searchText:k.val()},function(p){$("#chatHistoryDialogItems").find("[data-chatdialog-id]").detach();m.before(p.html);if(p.IsLoad){m.removeClass("custom-hidden")}else{m.addClass("custom-hidden")}f()});return false});$(document).on("change","#chatNotRead",function(){var n=$("[data-chatdialog-loadurl]");var m=n.closest("div");m.addClass("custom-hidden");var o=$(this).data("chatdialog-notreadurl");var l=$("#chatNotRead");var k=$("#chatHistoryDialogSearchText");$.get(o,{skipItems:0,notRead:l.is(":checked"),searchText:k.val()},function(p){$("#chatHistoryDialogItems").find("[data-chatdialog-id]").detach();m.before(p.html);if(p.IsLoad){m.removeClass("custom-hidden")}else{m.addClass("custom-hidden")}f()});return false});$(document).on("click","[data-chatdialog-loadurl]",function(){g();var n=$(this).closest("div");n.addClass("custom-hidden");var o=$(this).data("chatdialog-loadurl");var m=$("#chatHistoryDialogItems").find("[data-chatdialog-id]").length;var l=$("#chatNotRead");if(l.is(":checked")){m=$("#chatHistoryDialogItems").find("[data-chatdialog-id] .chat-count.active").length}var k=$("#chatHistoryDialogSearchText");$.get(o,{skipItems:m,notRead:l.is(":checked"),searchText:k.val()},function(p){n.before(p.html);if(p.IsLoad){n.removeClass("custom-hidden")}else{n.addClass("custom-hidden")}});return false});$(document).on("click","[data-chatdialogitems-loadurl]",function(){g();var m=$(this).closest("div");var k=$(this).data("chatdialog-id");var o=$(this).data("chatdialog-touserid");m.addClass("custom-hidden");var n=$(this).data("chatdialogitems-loadurl");var l=$("#chatDialogMessagesContainer").find(".chat-item ").length;var p=$("#chatDialogMessagesContainer .jspPane").height();$.get(n,{skipItems:l,dialogId:k,userId:o},function(q){m.after(q.html);p=$("#chatDialogMessagesContainer .jspPane").height()-p;f(p);if(q.IsLoad){m.removeClass("custom-hidden")}});return false});var h=function(o,m){g();$("#chatPopupContainer").addClass("custom-hidden");$("#chatPopupContainerItems").html("");var k=o.data("chatdialog-url");if(!k){if(!$("#chatContainer").data("chatdialog-block")){var n=$("[data-chatdialog-loadurl]");var l=n.closest("div");l.addClass("custom-hidden");$.get(n.data("chatdialog-loadurl"),function(p){l.before(p.html);if(p.IsLoad){l.removeClass("custom-hidden")}else{l.addClass("custom-hidden")}if(m){m()}$("#chatContainer").data("chatdialog-block",true)})}else{if(m){m()}}}};$(document).on("click","#openChatHistoryDialogMenuMobBtn",function(){h($(this),function(){$(".chat-button.enabled").hide();$(".mobile body").addClass("modal-open");$("#chatHistoryDialogContainer").removeClass("custom-hidden");$("#chatContainer").removeClass("custom-hidden");f()});return false});$(document).on("click","#openChatHistoryDialogMenuBtn",function(){h($(this),function(){$(".chat-button.enabled").hide();$(".mobile body").addClass("modal-open");$("#chatHistoryDialogContainer").removeClass("custom-hidden");$("#chatContainer").removeClass("custom-hidden");f()});return false});$(document).on("click","#openChatHistoryDialogBtn",function(){h($(this),function(){$(".chat-button.enabled").hide();$(".mobile body").addClass("modal-open");$("#chatHistoryDialogContainer").removeClass("custom-hidden");$("#chatContainer").removeClass("custom-hidden");f()});return false});$(document).on("click","#chatHistoryDialogClose",function(){$("#chatContainer").addClass("custom-hidden");$("#chatDialogContainer").html("");$("#chatHistoryDialogContainer").addClass("custom-hidden");$(".chat-button.enabled").show();$(".mobile body").removeClass("modal-open")});$(document).on("click","[data-autosend-chat-url]",function(){imls.OpenChat($(this).data("autosend-chat-url"),$(this).data("autosend-chat-text"),true);return false});imls.OpenChat=function(k,l,m){if($.fancybox){$.fancybox.close()}a(k,null,null,l,m);return false};$(document).on("click","[data-chatdialog-url]",function(){if($.fancybox){$.fancybox.close()}var m=$(this);var k=$(this).data("chatdialog-url");var l=$(this).data("chatdialog-inserturl");a(k,l,m);return false});$(document).on("click","#backChatHistoryDialog",function(){h($(this),function(){$("#backChatHistoryDialog").addClass("custom-hidden");$("#chatHistoryDialogContainer").removeClass("custom-hidden");var l=$("#chatDialogMessagesContainer").data("chatdialog-id");var n=null;var m=$("#chatHistoryDialogItems");var k=m.find('[data-chatdialog-id="'+l+'"]');if(k.length>0){n=k.offset().top-m.offset().top}$("#chatDialogContainer").html("");f(n)})});$(document).on("click","#chatDialogClose",function(){$("#chatContainer").addClass("custom-hidden");$("#chatDialogContainer").html("");$("#chatHistoryDialogContainer").addClass("custom-hidden");$(".chat-button.enabled").show();$(".mobile body").removeClass("modal-open")});$(document).on("click","#chatSendMessageBtn",function(){var n=$(this);if(n.attr("disabled")=="disabled"){return}var m=$(this).closest("form");var o=m.find("textarea");if(o.data("emojioneArea").editor){o.val(o.data("emojioneArea").getText())}if(m.valid()){n.attr("disabled","disabled");var k=m.serialize();o.val("");o.data("emojioneArea").setText("");if(typeof Storage!=="undefined"){var l=$("#ChatToDialogId").val();localStorage.removeItem(l+"ChatMessage")}$.post(m.attr("action"),k,function(){n.removeAttr("disabled")})}return false});$(document).on("change","#ChatFile",function(){var n=$(this);if(n.attr("disabled")=="disabled"){return}var l=$(this).closest("form");if(l.valid()){n.attr("disabled","disabled");var k=$(this).prop("files")[0];var m=new FormData(l[0]);m.append("file",k);$.ajax({url:l.attr("action"),type:"POST",data:m,success:function(){n.removeAttr("disabled")},cache:false,contentType:false,processData:false})}return false});var b=$.connection.connectHub;if(b){b.client.read=function(m){var l=$("#chatHistoryDialogItems").find('[data-chatdialog-id="'+m.dialogId+'"]');if(l.length>0){l.data("chatdialog-newcount",0);var k=l.find(".chat-count");k.removeClass("active");k.text(l.data("chatdialog-count"))}var n=m.newTotalCount;if(n>0){$(".chat-new-count").text(n);$("#openChatHistoryDialogMenuBtn").attr("class","active");$("#openChatHistoryDialogMenuMobBtn").attr("class","active")}else{$(".chat-new-count").text("");$(".chat-new-count").addClass("custom-hidden");$("#openChatHistoryDialogMenuBtn").attr("class","");$("#openChatHistoryDialogMenuMobBtn").attr("class","")}};b.client.onlineUser=function(k){$('[data-chatdialog-userstatus="'+k+'"]').each(function(){$(this).addClass("on-line");$(this).removeClass("off-line")})};b.client.offlineUser=function(k){$('[data-chatdialog-userstatus="'+k+'"]').each(function(){$(this).removeClass("on-line");$(this).addClass("off-line")})};b.client.newChatMessage=function(p){$("#openChatHistoryDialogBtn").addClass("enabled");var m=$('#chatDialogMessagesContainer[data-chatdialog-id="'+p.dialogId+'"]');var q=m.length>0;var y=p.user.Logo;var x=p.user.Id;var o=p.curUser.Id;var z=p.user.Name;var n=p.isMy?"chat-item_q":"chat-item_a";var k=$("#chatHistoryDialogItems").find('[data-chatdialog-id="'+p.dialogId+'"]');var l=p.totalCount;var r=p.newCount>0;k.detach();var A="";if(o!=x){A=" <b>Вы: </b>"}if($("#chatContainer").data("chatdialog-block")){var s='<div data-chatdialog-id="'+p.dialogId+'" data-chatdialog-count="'+l+'"  data-chatdialog-newcount="'+p.newCount+'" class="chat-item chat-item_a s-back" data-chatdialog-url="/Chat/GetDialog?userId='+x+"&dialogId="+p.dialogId+'"><div class="chat-item_avatar"><img src="'+y+'" alt=""><div data-chatdialog-userstatus="'+x+'" class="status '+(p.user.Online?"on-line":"off-line")+'"></div></div><div class="chat-inner"> <div class="pull-right"><div class="chat-item_time">'+p.date+'</div><div class="chat-count '+(r?"active":"")+'">'+(r?l+"/"+p.newCount:l)+'</div></div><div class="chat-item_message"><div class="chat-item_name">'+z+'</div><p class="emojione-container">'+A+p.text+"</p></div></div></div>";$("#chatHistoryDialogItems").find(".jspPane").prepend(s);f()}if(q){if(!p.isMy){var v=m.data("chatdialog-readurl");if(v){$.get(v)}}var w='<div class="chat-item '+n+'"><div class="chat-item_avatar"><img src="'+p.curUser.Logo+'" alt=""><div data-chatdialog-userstatus="'+o+'" class="status '+(p.curUser.Online?"on-line":"off-line")+'"></div></div><div class="chat-inner"><div class="chat-item_bubble"><p class="emojione-container">'+p.text+'</p><div class="chat-item_data">'+p.date+"</div></div></div></div>";var t=m.find(".jspPane");t.append(w);t.scrollTop(100000);$("#backChatHistoryDialog").removeClass("custom-hidden");f(100000)}else{if(!p.isMy){$(".chat-new-count").each(function(){var C=parseInt($(this).text())||0;var B=parseInt(C)+parseInt(1);if(B>0){$(this).text(B);$(this).removeClass("custom-hidden")}else{$(this).text("");$(this).addClass("custom-hidden")}})}}if(!p.isMy){if($("#openChatHistoryDialogBtn").is(":visible")&&!$("#chatDialogContainer").is(":visible")){var u='<div class="chat-popupitem"><div class="note-item_close sprite" role="chatPopupItemClose"></div><div class="chat-item chat-item_a" data-chat-massageitemsurl="/Chat/GetDialog?userId='+x+"&dialogId="+p.dialogId+'"><div class="chat-item_avatar"><img src="'+y+'" alt=""><div data-chatdialog-userstatus="'+x+'" class="status '+(p.user.Online?"on-line":"off-line")+'"></div></div><div class="chat-item_name">'+z+'</div><div class="chat-button_inner clearfix"><div class="emojione-container" >'+p.text+'</div><div class="chat-item_data" >'+p.date+"</div></div></div></div>";$("#chatPopupContainerItems").find(".chat-popupitem").addClass("custom-hidden");$("#chatPopupContainerItems").prepend(u);e($("#chatPopupContainerItems"));$("#chatPopupContainer").removeClass("custom-hidden");j()}$.playSoundChat()}}}});
var imls=imls||{};$(function(){imls.runLoadInteractive=function(){};imls.initHub=function(c){if(!imls.hubInit){imls.hubInit=true;var b=$.connection.connectHub;var d=$.connection.interactiveInfoHub;imls.runLoadInteractive=function(){if(imls.loadInteractive&&d){imls.loadInteractive(d)}};var e=function(){$.connection.hub.start({jsonp:true,transport:["webSockets","longPolling"]}).done(function(){imls.runLoadInteractive();if(c){c()}}).fail(function(){})};if(b){$.connection.hub.disconnected(function(){setTimeout(function(){e()},5000)});e()}$.cookie("openChat",true,{expires:366,path:"/",domain:"."+imls.SiteDomain})}else{if(c){c()}}};var a=$.cookie("openChat");if(imls.currentUserId||a){imls.initHub()}});
